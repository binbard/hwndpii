<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>hwndpii - API Documentation</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="/static/css/styles.css">
    <link rel="icon" href="/static/images/favicon.ico">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="/static/css/styles.css">
    <link rel="icon" href="/static/images/favicon.ico">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css">

    <style>
        .header {
            background-color: #f8f9fa;
            border-bottom: 1px solid #eee;
        }
        .hero {
            padding: 0;
        }
        .api-section {
            margin-bottom: 40px;
        }
        .endpoint {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 5px;
            margin-bottom: 30px;
            border-left: 4px solid #28a745;
        }
        .method-badge {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 4px;
            color: white;
            font-weight: 700;
            font-size: 14px;
            margin-right: 10px;
        }
        .post {
            background-color: #28a745;
        }
        .get {
            background-color: #17a2b8;
        }
        .endpoint-url {
            font-family: monospace;
            font-size: 16px;
            padding: 8px;
            background-color: #e9ecef;
            border-radius: 4px;
            display: inline-block;
            margin-top: 8px;
        }
        .param-table {
            margin-top: 15px;
        }
        pre {
            background-color: #272822;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
        }
        .footer {
            background-color: #f9f9f9;
            padding: 20px 0;
            margin-top: 60px;
            border-top: 1px solid #eee;
        }
        .home-btn {
            margin-left: 10px;
        }

        .endpoint-card {
            border-left: 4px solid #28a745;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }
        .endpoint-card:hover {
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .method-get {
            border-left-color: #007bff;
        }
        .method-post {
            border-left-color: #28a745;
        }
        .badge-method {
            font-size: 0.8rem;
            padding: 5px 10px;
            border-radius: 3px;
        }
        .code-block {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            font-family: monospace;
            white-space: pre-wrap;
        }
        .param-table {
            width: 100%;
        }
        .param-table th {
            background-color: #f1f1f1;
        }
        
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <nav class="navbar navbar-expand-lg navbar-light">
            <a class="navbar-brand" href="/">
                ᕼᗯᑎᗪᑭII API
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item">
                        <a class="btn btn-outline-success" href="/">
                            <i class="fas fa-arrow-left"></i> Back to App
                        </a>
                    </li>
                </ul>
            </div>
        </nav>
        <div class="hero text-center">
            <h1 class="display-4">ᕼᗯᑎᗪᑭII API Documentation</h1>
            <p class="lead">Programmatically anonymize sensitive data in your applications</p>
        </div>
    </header>

    <div class="container mt-5 mb-5">
        <!-- Introduction -->
        <section class="api-section">
            <h2>Introduction</h2>
            <p>
                The ᕼᗯᑎᗪᑭII API allows you to programmatically anonymize sensitive data in both text and CSV formats.
                Our API uses Microsoft's Presidio framework for recognizing and anonymizing personally identifiable information (PII).
            </p>
            <p>
                <strong>Base URL:</strong> <code id="base-url"></code>
            </p>
        </section>

        <!-- Authentication -->
        <section class="api-section">
            <h2>Authentication</h2>
            <p>
                Currently, the API does not require authentication. However, for production use,
                we recommend implementing rate limiting and API keys on your end.
            </p>
        </section>

        <!-- Endpoints -->
        <section class="api-section">
            <h2>Endpoints</h2>
            
            <!-- Text Anonymization Endpoint -->
            <div class="endpoint">
                <h3>
                    <span class="method-badge post">POST</span>
                    Text Anonymization
                </h3>
                <div class="endpoint-url">/api/anonymize_text</div>
                <p class="mt-3">
                    Anonymizes PII in plain text. Supports various anonymization modes including default redaction, 
                    masking, encryption, and decryption.
                </p>
                
                <h4>Request Parameters</h4>
                <table class="table table-bordered param-table">
                    <thead class="thead-light">
                        <tr>
                            <th>Parameter</th>
                            <th>Type</th>
                            <th>Required</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>text</td>
                            <td>string</td>
                            <td>Yes</td>
                            <td>The text content to be anonymized</td>
                        </tr>
                        <tr>
                            <td>mode</td>
                            <td>string</td>
                            <td>No</td>
                            <td>Anonymization mode: 'default', 'mask', 'encrypt', or 'decrypt' (default: 'default')</td>
                        </tr>
                        <tr>
                            <td>key</td>
                            <td>string</td>
                            <td>Conditional</td>
                            <td>Required for 'encrypt' and 'decrypt' modes. Must be 16, 24, or 32 characters long</td>
                        </tr>
                    </tbody>
                </table>
                
                <h4>Example Request</h4>
                <pre><code>curl -X POST <span class="base-url-placeholder"></span>/api/anonymize_text \
    -H "Content-Type: application/json" \
    -d '{"text": "My name is John Doe and my email is john.doe@example.com", "mode": "default"}'</code></pre>
                
                <h4>Example Response</h4>
                <pre><code>{
  "status": "success",
  "anonymized_text": "My name is &lt;PERSON&gt; and my email is &lt;EMAIL_ADDRESS&gt;"
}</code></pre>
            </div>
            
            <!-- CSV Anonymization Endpoint -->
            <div class="endpoint">
                <h3>
                    <span class="method-badge post">POST</span>
                    CSV Anonymization
                </h3>
                <div class="endpoint-url">/api/anonymize_csv</div>
                <p class="mt-3">
                    Anonymizes PII within CSV files while preserving the structure. 
                    Supports the same anonymization modes as the text endpoint.
                </p>
                
                <h4>Request Parameters</h4>
                <table class="table table-bordered param-table">
                    <thead class="thead-light">
                        <tr>
                            <th>Parameter</th>
                            <th>Type</th>
                            <th>Required</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>file</td>
                            <td>file</td>
                            <td>Yes</td>
                            <td>CSV file to be anonymized</td>
                        </tr>
                        <tr>
                            <td>mode</td>
                            <td>string</td>
                            <td>No</td>
                            <td>Anonymization mode: 'default', 'mask', 'encrypt', or 'decrypt' (default: 'default')</td>
                        </tr>
                        <tr>
                            <td>key</td>
                            <td>string</td>
                            <td>Conditional</td>
                            <td>Required for 'encrypt' and 'decrypt' modes. Must be 16, 24, or 32 characters long</td>
                        </tr>
                    </tbody>
                </table>
                
                <h4>Example Request</h4>
                <pre><code>curl -X POST <span class="base-url-placeholder"></span>/api/anonymize_csv \
    -F "file=@data.csv" \
    -F "mode=mask"</code></pre>
                
                <h4>Response</h4>
                <p>
                    The response is a CSV file download with the anonymized content. The Content-Disposition header 
                    will be set to prompt a file download with the name "processed_filename.csv".
                </p>
            </div>
        </section>
        
        <!-- Anonymization Modes -->
        <section class="api-section">
            <h2>Anonymization Modes</h2>
            
            <div class="card-deck">
                <div class="card mb-4">
                    <div class="card-header bg-light">
                        <h5 class="mb-0">Default</h5>
                    </div>
                    <div class="card-body">
                        <p>
                            Replaces identified PII with entity type placeholders.
                        </p>
                        <p><strong>Example:</strong></p>
                        <p>
                            Input: "Call John at 555-123-4567"<br>
                            Output: "Call &lt;PERSON&gt; at &lt;PHONE_NUMBER&gt;"
                        </p>
                    </div>
                </div>
                
                <div class="card mb-4">
                    <div class="card-header bg-light">
                        <h5 class="mb-0">Mask</h5>
                    </div>
                    <div class="card-body">
                        <p>
                            Replaces identified PII with asterisks ("***").
                        </p>
                        <p><strong>Example:</strong></p>
                        <p>
                            Input: "Call John at 555-123-4567"<br>
                            Output: "Call *** at ***"
                        </p>
                    </div>
                </div>
            </div>
            
            <div class="card-deck">
                <div class="card mb-4">
                    <div class="card-header bg-light">
                        <h5 class="mb-0">Encrypt</h5>
                    </div>
                    <div class="card-body">
                        <p>
                            Encrypts identified PII using AES encryption with the provided key.
                        </p>
                        <p><strong>Example:</strong></p>
                        <p>
                            Input: "Call John at 555-123-4567"<br>
                            Output: "Call A9f73HjL0pnVKlM== at B8tY2NpjL0pKlM=="
                        </p>
                        <p><strong>Note:</strong> Key must be 16, 24, or 32 characters long (128, 192, or 256 bits).</p>
                    </div>
                </div>
                
                <div class="card mb-4">
                    <div class="card-header bg-light">
                        <h5 class="mb-0">Decrypt</h5>
                    </div>
                    <div class="card-body">
                        <p>
                            Decrypts previously encrypted content using the same key that was used for encryption.
                        </p>
                        <p><strong>Example:</strong></p>
                        <p>
                            Input: "Call A9f73HjL0pnVKlM== at B8tY2NpjL0pKlM=="<br>
                            Output: "Call John at 555-123-4567"
                        </p>
                        <p><strong>Note:</strong> Requires the same key that was used for encryption.</p>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Error Handling -->
        <section class="api-section">
            <h2>Error Handling</h2>
            <p>
                When an error occurs, the API returns descriptive error messages. Common errors include:
            </p>
            <ul>
                <li>Missing required parameters</li>
                <li>Invalid encryption/decryption key length (must be 16, 24, or 32 characters)</li>
                <li>Invalid file format for CSV anonymization</li>
                <li>Decryption errors when using an incorrect key</li>
            </ul>
            
            <h4>Example Error Response</h4>
            <pre><code>{
  "status": "error",
  "error": "Invalid input, key must be of length 16, 24 or 32 characters"
}</code></pre>
        </section>
        
        <!-- Code Examples -->
        <section class="api-section">
            <h2>Code Examples</h2>
            
            <!-- Python Example -->
            <div class="card mb-4">
                <div class="card-header bg-light">
                    <h5 class="mb-0">Python</h5>
                </div>
                <div class="card-body">
                    <pre><code>import requests

# Text anonymization
def anonymize_text(text, mode='default', key=None):
    url = '<span class="base-url-placeholder"></span>/api/anonymize_text'
    data = {
        'text': text,
        'mode': mode
    }
    
    if key and (mode == 'encrypt' or mode == 'decrypt'):
        data['key'] = key
        
    response = requests.post(url, json=data)
    return response.json()

# Example usage
text = "My SSN is 123-45-6789 and my name is Jane Smith"
result = anonymize_text(text, mode='mask')
if result['status'] == 'success':
    print(result['anonymized_text'])
else:
    print("Error:", result['error'])

# CSV anonymization
def anonymize_csv(file_path, mode='default', key=None):
    url = '<span class="base-url-placeholder"></span>/api/anonymize_csv'
    
    files = {'file': open(file_path, 'rb')}
    data = {'mode': mode}
    
    if key and (mode == 'encrypt' or mode == 'decrypt'):
        data['key'] = key
        
    response = requests.post(url, files=files, data=data)
    
    # Save response to file
    with open('anonymized.csv', 'wb') as f:
        f.write(response.content)
    
    return 'File saved as anonymized.csv'

# Example usage
anonymize_csv('customer_data.csv', mode='default')</code></pre>
                </div>
            </div>
            
            <!-- JavaScript Example -->
            <div class="card mb-4">
                <div class="card-header bg-light">
                    <h5 class="mb-0">JavaScript</h5>
                </div>
                <div class="card-body">
                    <pre><code>// Text anonymization
async function anonymizeText(text, mode = 'default', key = null) {
  const url = '<span class="base-url-placeholder"></span>/api/anonymize_text';
  
  const payload = {
    text: text,
    mode: mode
  };
  
  if (key && (mode === 'encrypt' || mode === 'decrypt')) {
    payload.key = key;
  }
  
  const response = await fetch(url, {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify(payload)
  });
  
  return await response.json();
}

// Example usage
anonymizeText('My email is user@example.com', 'default')
  .then(result => {
    if (result.status === 'success') {
      console.log(result.anonymized_text);
    } else {
      console.error('Error:', result.error);
    }
  })
  .catch(error => console.error('Error:', error));

// CSV anonymization
async function anonymizeCSV(file, mode = 'default', key = null) {
  const url = '<span class="base-url-placeholder"></span>/api/anonymize_csv';
  
  const formData = new FormData();
  formData.append('file', file);
  formData.append('mode', mode);
  
  if (key && (mode === 'encrypt' || mode === 'decrypt')) {
    formData.append('key', key);
  }
  
  const response = await fetch(url, {
    method: 'POST',
    body: formData
  });
  
  // For file downloads
  const blob = await response.blob();
  const downloadUrl = window.URL.createObjectURL(blob);
  
  const a = document.createElement('a');
  a.style.display = 'none';
  a.href = downloadUrl;
  a.download = 'anonymized.csv';
  document.body.appendChild(a);
  a.click();
  window.URL.revokeObjectURL(downloadUrl);
}

// Example usage with file input
document.getElementById('fileInput').addEventListener('change', function(e) {
  const file = e.target.files[0];
  anonymizeCSV(file, 'mask')
    .catch(error => console.error('Error:', error));
});</code></pre>
                </div>
            </div>
        </section>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container text-center">
            <p class="mb-0">Made with <span style="color: #e25555;">&#10084;&#65039;</span> by <strong>TeamX</strong> for Thales Hackathon</p>
        </div>
    </footer>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    
    <script>
        // Set current base URL
        const baseUrl = window.location.origin;
        document.getElementById('base-url').textContent = baseUrl;
        
        document.querySelectorAll('.base-url-placeholder').forEach(el => {
            el.textContent = baseUrl;
        });
    </script>
</body>
</html>